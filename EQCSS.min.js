// EQCSS / Tommy Hodgins, Maxime Euzi√®re / MIT licence
// version 1.1.1
EQCSS={data:[],load:function(){for(var a=document.querySelectorAll("style"),c=0;c<a.length;c++)null===a[c].getAttribute("data-eqcss-read")&&(a[c].setAttribute("data-eqcss-read","true"),EQCSS.parse(a[c].innerHTML),EQCSS.apply());a=document.querySelectorAll("script");for(c=0;c<a.length;c++)null===a[c].getAttribute("data-eqcss-read")&&"text/eqcss"===a[c].getAttribute("type")&&(a[c].src?function(){var b=new XMLHttpRequest;b.open("GET",a[c].src,!0);b.send(null);b.onload=function(){EQCSS.parse(b.responseText);
EQCSS.apply()}}():(EQCSS.parse(a[c].innerHTML),EQCSS.apply()),a[c].setAttribute("data-eqcss-read","true"));a=document.querySelectorAll("link");for(c=0;c<a.length;c++)null===a[c].getAttribute("data-eqcss-read")&&"stylesheet"==a[c].getAttribute("rel")&&(a[c].href&&function(){var b=new XMLHttpRequest;b.open("GET",a[c].href,!0);b.send(null);b.onload=function(){EQCSS.parse(b.responseText);EQCSS.apply()}}(),a[c].setAttribute("data-eqcss-read","true"))},parse:function(a){a=a.replace(/\s+/g," ");a=a.replace(/\/\*[\w\W]*?\*\//g,
"");a=a.replace(/@element/g,"\n@element");a=a.replace(/(@element.*?\{([^}]*?\{[^}]*?\}[^}]*?)*\}).*/g,"$1");a.replace(/(@element.*(?!@element))/g,function(a,b){dataEntry={};b.replace(/@element ?["']([^"']*)["']/g,function(a,b){dataEntry.g=b});dataEntry.a=[];b.replace(/and ?\( ?([^:]*) ?: ?([^)]*) ?\)/g,function(a,b,c){a=null;a=c.replace(/^\d+(\D+)$/,"$1");a==c&&(a=null);c=c.replace(/^(\d+)\D+$/,"$1");dataEntry.a.push({measure:b,value:c,b:a})});b.replace(/{(.*)}/g,function(a,b){dataEntry.style=b});
EQCSS.data.push(dataEntry)})},apply:function(){var a,c,b,f,m,l,n,d,e,h,k;for(a=0;a<EQCSS.data.length;a++)for(f=document.querySelectorAll(EQCSS.data[a].g),c=0;c<f.length;c++){m="data-eqcss-"+a+"-"+c;f[c].setAttribute(m,"");n="data-eqcss-"+a+"-"+c+"-parent";f[c]!=document.documentElement&&f[c].parentNode.setAttribute(n,"");element_guid_prev="data-eqcss-"+a+"-"+c+"-prev";f[c].previousElementSibling&&f[c].previousElementSibling.setAttribute(element_guid_prev,"");element_guid_next="data-eqcss-"+a+"-"+
c+"-next";f[c].nextElementSibling&&f[c].nextElementSibling.setAttribute(element_guid_next,"");l=document.querySelector("#"+m);l||(l=document.createElement("STYLE"),l.id=m,l.setAttribute("data-eqcss-read","true"),document.querySelector("head").appendChild(l));l=document.querySelector("#"+m);h=!0;b=0;a:for(;b<EQCSS.data[a].a.length;b++){e=window.getComputedStyle(f[c],null);k=null;f[c]!=document.documentElement&&(k=window.getComputedStyle(f[c].parentNode,null));d=!1;if("vw"===EQCSS.data[a].a[b].b){d=
!0;var g=parseInt(EQCSS.data[a].a[b].value);EQCSS.data[a].a[b].c=g*window.innerWidth/100}else if("vh"===EQCSS.data[a].a[b].b)d=!0,g=parseInt(EQCSS.data[a].a[b].value),EQCSS.data[a].a[b].c=g*window.innerHeight/100;else if("vmin"===EQCSS.data[a].a[b].b)d=!0,g=parseInt(EQCSS.data[a].a[b].value),EQCSS.data[a].a[b].c=g*Math.min(window.innerWidth,window.innerHeight)/100;else if("vmax"===EQCSS.data[a].a[b].b)d=!0,g=parseInt(EQCSS.data[a].a[b].value),EQCSS.data[a].a[b].c=g*Math.max(window.innerWidth,window.innerHeight)/
100;else if(null!=EQCSS.data[a].a[b].b&&"px"!=EQCSS.data[a].a[b].b&&"%"!=EQCSS.data[a].a[b].b){g=document.createElement("DIV");g.style.visibility="hidden";g.style.border="1px solid red";g.style.width=EQCSS.data[a].a[b].value+EQCSS.data[a].a[b].b;var p=f[c];f[c]!=document.documentElement&&(p=f[c].parentNode);p.appendChild(g);EQCSS.data[a].a[b].value=parseInt(window.getComputedStyle(g,null).getPropertyValue("width"));EQCSS.data[a].a[b].b="px";p.removeChild(g)}g=d?EQCSS.data[a].a[b].c:parseInt(EQCSS.data[a].a[b].value);
switch(EQCSS.data[a].a[b].measure){case "min-width":if(1==d||"px"==EQCSS.data[a].a[b].b)if(d=parseInt(e.getPropertyValue("width")),!(d>=g)){h=!1;break a}if("%"==EQCSS.data[a].a[b].b&&(d=parseInt(e.getPropertyValue("width")),e=parseInt(k.getPropertyValue("width")),!(e/d<=100/g))){h=!1;break a}break;case "max-width":if(1==d||"px"==EQCSS.data[a].a[b].b)if(d=parseInt(e.getPropertyValue("width")),!(d<=g)){h=!1;break a}if("%"==EQCSS.data[a].a[b].b&&(d=parseInt(e.getPropertyValue("width")),e=parseInt(k.getPropertyValue("width")),
!(e/d>=100/g))){h=!1;break a}break;case "min-height":if(1==d||"px"==EQCSS.data[a].a[b].b)if(d=parseInt(e.getPropertyValue("height")),!(d>=g)){h=!1;break a}if("%"==EQCSS.data[a].a[b].b&&(d=parseInt(e.getPropertyValue("height")),e=parseInt(k.getPropertyValue("height")),!(e/d<=100/g))){h=!1;break a}break;case "max-height":if(1==d||"px"==EQCSS.data[a].a[b].b)if(d=parseInt(e.getPropertyValue("height")),!(d<=g)){h=!1;break a}if("%"==EQCSS.data[a].a[b].b&&(d=parseInt(e.getPropertyValue("height")),e=parseInt(k.getPropertyValue("height")),
!(e/d>=100/g))){h=!1;break a}break;case "min-scroll-x":k=f[c].scrollLeft;if(1==d||"px"==EQCSS.data[a].a[b].b){if(!(k>=g)){h=!1;break a}}else if("%"==EQCSS.data[a].a[b].b&&(d=f[c].scrollWidth,e=f[c]==document.documentElement||f[c]==document.body?window.innerWidth:parseInt(e.getPropertyValue("width")),!(k/(d-e)*100>=g))){h=!1;break a}break;case "min-scroll-y":k=f[c].scrollTop;if(1==d||"px"==EQCSS.data[a].a[b].b){if(!(k>=g)){h=!1;break a}}else if("%"==EQCSS.data[a].a[b].b&&(d=f[c].scrollHeight,e=f[c]==
document.documentElement||f[c]==document.body?window.innerHeight:parseInt(e.getPropertyValue("height")),!(k/(d-e)*100>=g))){h=!1;break a}break;case "max-scroll-x":k=f[c].scrollLeft;if(1==d||"px"==EQCSS.data[a].a[b].b){if(!(k<=g)){h=!1;break a}}else if("%"==EQCSS.data[a].a[b].b&&(d=f[c].scrollWidth,e=f[c]==document.documentElement||f[c]==document.body?window.innerWidth:parseInt(e.getPropertyValue("width")),!(k/(d-e)*100<=g))){h=!1;break a}break;case "max-scroll-y":k=f[c].scrollTop;if(1==d||"px"==EQCSS.data[a].a[b].b){if(!(k<=
g)){h=!1;break a}}else if("%"==EQCSS.data[a].a[b].b&&(d=f[c].scrollHeight,e=f[c]==document.documentElement||f[c]==document.body?window.innerHeight:parseInt(e.getPropertyValue("height")),!(k/(d-e)*100<=g))){h=!1;break a}break;case "min-characters":if(f[c].value){if(!(f[c].value.length>=g)){h=!1;break a}}else if(!(f[c].textContent.length>=g)){h=!1;break a}break;case "max-characters":if(f[c].value){if(!(f[c].value.length<=g)){h=!1;break a}}else if(!(f[c].textContent.length<=g)){h=!1;break a}break;case "min-children":if(!(f[c].children.length>=
g)){h=!1;break a}break;case "max-children":if(!(f[c].children.length<=g)){h=!1;break a}break;case "min-lines":d=parseInt(e.getPropertyValue("height"))-parseInt(e.getPropertyValue("border-top-width"))-parseInt(e.getPropertyValue("border-bottom-width"))-parseInt(e.getPropertyValue("padding-top"))-parseInt(e.getPropertyValue("padding-bottom"));e=parseInt(e.getPropertyValue("line-height"));if(!(d/e>=g)){h=!1;break a}break;case "max-lines":if(d=parseInt(e.getPropertyValue("height"))-parseInt(e.getPropertyValue("border-top-width"))-
parseInt(e.getPropertyValue("border-bottom-width"))-parseInt(e.getPropertyValue("padding-top"))-parseInt(e.getPropertyValue("padding-bottom")),e=parseInt(e.getPropertyValue("line-height")),!(d/e+1<=g)){h=!1;break a}}}if(!0===h){b=EQCSS.data[a].style;b=b.replace(/eval\( *((".*?")|('.*?')) *\)/g,function(a,b){var e=f[c],d="";try{with(e)d=eval(b.slice(1,-1))}catch(g){d=""}return d});b=b.replace(/(\$|eq_)this/g,"["+m+"]");b=b.replace(/(\$|eq_)parent/g,"["+n+"]");b=b.replace(/(\$|eq_)prev/g,"["+element_guid_prev+"]");b=
b.replace(/(\$|eq_)next/g,"["+element_guid_next+"]");b=b.replace(/(\$|eq_)root/g,"html");try{l.innerHTML=b}catch(q){l.styleSheet.cssText=b}}else try{l.innerHTML=""}catch(q){l.styleSheet.cssText=""}}},f:function(a){function c(){try{n.doScroll("left")}catch(a){setTimeout(c,50);return}b("poll")}function b(c){if("readystatechange"!=c.type||"complete"==l.readyState)("load"==c.type?window:l)[h](k+c.type,b,!1),!f&&(f=!0)&&a.call(window,c.type||c)}var f=!1,m=!0,l=window.document,n=l.documentElement,d=!~navigator.userAgent.indexOf("MSIE 8"),
e=d?"addEventListener":"attachEvent",h=d?"removeEventListener":"detachEvent",k=d?"":"on";if("complete"==l.readyState)a.call(window,"lazy");else{if(!d&&n.doScroll){try{m=!window.frameElement}catch(g){}m&&c()}l[e](k+"DOMContentLoaded",b,!1);l[e](k+"readystatechange",b,!1);window[e](k+"load",b,!1)}}};EQCSS.f(function(){EQCSS.load();EQCSS.apply()});window.addEventListener("resize",function(){EQCSS.apply()});window.addEventListener("scroll",function(){EQCSS.apply()});